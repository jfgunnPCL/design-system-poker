<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Planning Poker</title>
    <link rel="stylesheet" href="/css/style.css" />
</head>

<body>

    <!-- ── Name modal ──────────────────────────────────────────────────────── -->
    <div id="name-modal" class="modal-overlay" hidden>
        <div class="modal">
            <h2>Welcome to Planning Poker</h2>
            <p>Enter your name to continue.</p>
            <form id="name-form">
                <input id="name-input" type="text" placeholder="Your name" maxlength="40" autocomplete="off" required />
                <button type="submit">Continue</button>
            </form>
        </div>
    </div>

    <!-- ── Home view ───────────────────────────────────────────────────────── -->
    <div id="home-view" hidden>
        <div class="home-container">
            <h1>Planning Poker</h1>
            <p>Create a session and share the link with your team.</p>
            <button id="create-session-btn" class="btn-primary">Create Session</button>
        </div>
    </div>

    <!-- ── Session view ────────────────────────────────────────────────────── -->
    <div id="session-view" hidden>
        <div class="session-layout">

            <!-- Sidebar: users -->
            <aside class="sidebar">
                <h3>Participants</h3>
                <ul id="user-list" class="user-list"></ul>

                <div class="role-section">
                    <h4>My Role</h4>
                    <div class="role-toggle">
                        <button id="role-developer" class="role-btn active" data-role="developer">Developer</button>
                        <button id="role-observer" class="role-btn" data-role="observer">Observer</button>
                    </div>
                </div>

                <div class="share-section">
                    <h4>Share Session</h4>
                    <button id="copy-link-btn" class="btn-secondary">Copy Link</button>
                    <span id="copy-confirmation" class="copy-confirmation" hidden>Copied!</span>
                </div>
            </aside>

            <!-- Main area -->
            <main class="main-area">

                <!-- Round header -->
                <div id="round-header" class="round-header">
                    <div id="no-round-msg" class="no-round-msg">
                        <p>No active round. <span id="waiting-for-creator">Waiting for the session creator to start
                                one.</span></p>
                    </div>
                    <div id="round-info" hidden>
                        <h2 id="ticket-description" class="ticket-description"></h2>
                        <p id="round-status" class="round-status"></p>
                    </div>
                </div>

                <!-- Voting cards (developers only, while round active and not revealed) -->
                <div id="voting-area" class="voting-area" hidden>
                    <div class="vote-cards" id="vote-cards">
                        <!-- rendered by JS -->
                    </div>
                </div>

                <!-- Results (after reveal) -->
                <div id="results-area" class="results-area" hidden>
                    <div class="stats">
                        <div class="stat-card">
                            <span class="stat-label">Average</span>
                            <span id="stat-average" class="stat-value"></span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Lowest</span>
                            <span id="stat-min" class="stat-value"></span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Highest</span>
                            <span id="stat-max" class="stat-value"></span>
                        </div>
                    </div>
                    <div id="vote-breakdown" class="vote-breakdown"></div>
                </div>

                <!-- Creator controls -->
                <div id="creator-controls" class="creator-controls" hidden>
                    <div id="ctrl-start-round" class="ctrl-panel">
                        <h4>Start New Round</h4>
                        <input id="ticket-input" type="text" placeholder="Ticket description (optional)" maxlength="200"
                            autocomplete="off" />
                        <button id="start-round-btn" class="btn-primary">Start Round</button>
                    </div>
                    <div id="ctrl-reveal" class="ctrl-panel" hidden>
                        <button id="reveal-btn" class="btn-primary">Reveal Votes</button>
                    </div>
                    <div id="ctrl-new-round" class="ctrl-panel" hidden>
                        <input id="ticket-input-new" type="text" placeholder="Next ticket description (optional)"
                            maxlength="200" autocomplete="off" />
                        <button id="new-round-btn" class="btn-secondary">Start New Round</button>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/app.js"></script>
</body>

</html>